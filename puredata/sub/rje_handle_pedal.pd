#N canvas -8 -8 1920 1037 10;
#X text 595 56 HANDLE PEDAL;
#X obj 595 112 nbx 5 14 -1e+037 1e+037 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X obj 716 555 list store;
#X msg 31 446 \$1 \$1 \$2;
#X text 1218 276 HANDLE PEDAL RELEASE;
#X text 1277 319 output numbers right if >=;
#X text 1251 346 send note off for all notes and clear list;
#X obj 1220 442 list.each;
#X obj 1220 415 list store;
#X text 1298 414 a copy of all note-offs;
#X text 788 555 note-offs;
#X msg 1271 611 \$1 \$1 0;
#X text 1280 588 turn off all notes in list;
#X obj 1220 320 moses 1;
#X text 925 480 empty list;
#X text 655 112 is pedal down;
#X msg 330 338 \$1;
#X obj 716 399 list append;
#X text 338 318 remove note from note-offs;
#X obj 330 456 list.pass_if;
#X obj 433 457 !=;
#X text 462 456 discard this note;
#X obj 330 365 buddy;
#X obj 716 604 s note_offs;
#X obj 1277 392 r note_offs;
#X obj 387 403 r note_offs;
#X obj 330 426 list store;
#X text 724 315 add note to note-offs;
#X obj 779 373 r note_offs;
#X msg 716 337 \$1;
#X obj 716 581 list.unique;
#X obj 547 80 bang;
#X obj 1220 347 bang;
#X obj 330 396 bang;
#X obj 595 137 s pedal_changed;
#X obj 965 226 r pedal_changed;
#X obj 579 245 r pedal_changed;
#X obj 196 252 r pedal_changed;
#X obj 1220 296 r pedal_changed;
#X obj 31 20 inlet keyvelo;
#X obj 716 247 rje_forward_note_if_pedal_down_and_note_up;
#X obj 330 267 rje_forward_note_if_pedal_down_and_note_on;
#X obj 31 277 rje_forward_note_if_pedal_up;
#X obj 31 731 outlet keykeyvelo;
#X obj 595 78 rje_is_pedal_on;
#X connect 1 0 34 0;
#X connect 2 0 30 0;
#X connect 3 0 43 0;
#X connect 7 0 2 0;
#X connect 7 1 11 0;
#X connect 8 0 7 0;
#X connect 11 0 43 0;
#X connect 13 0 32 0;
#X connect 16 0 22 0;
#X connect 16 0 22 1;
#X connect 17 0 2 0;
#X connect 19 0 2 0;
#X connect 19 1 20 0;
#X connect 20 0 19 1;
#X connect 22 0 33 0;
#X connect 22 1 20 1;
#X connect 24 0 8 1;
#X connect 25 0 26 1;
#X connect 26 0 19 0;
#X connect 28 0 17 1;
#X connect 29 0 17 0;
#X connect 30 0 23 0;
#X connect 31 0 1 0;
#X connect 32 0 8 0;
#X connect 33 0 26 0;
#X connect 35 0 40 1;
#X connect 36 0 41 1;
#X connect 37 0 42 1;
#X connect 38 0 13 0;
#X connect 39 0 31 0;
#X connect 39 0 41 0;
#X connect 39 0 42 0;
#X connect 39 0 40 0;
#X connect 40 0 29 0;
#X connect 41 0 3 0;
#X connect 41 0 16 0;
#X connect 42 0 3 0;
#X connect 44 0 1 0;
